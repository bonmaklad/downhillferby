---
import { Image } from 'astro:assets';
import { pastEvents } from '../data/past-events';

const limited = pastEvents.slice(0, 3);
---

<section class="section-pad bg-ink text-white">
	<div class="mx-auto max-w-6xl space-y-8 px-6">
		<div class="flex flex-col gap-4">
			<p class="text-xs uppercase tracking-[0.34em] text-black">Throwback energy</p>
			<h2 class="section-heading text-white">Past events, future hype</h2>
			<p class="max-w-3xl text-lg text-black/80">
				Scroll the highlights from recent yearsâ€”then add your kart to the story.
			</p>
		</div>
		<div class="relative">
			<div class="flex gap-6 overflow-x-auto pb-4">
				{limited.map((event) => (
					<div class="min-w-[280px] flex-1 rounded-3xl border border-brand-silver/50 bg-black p-5 text-ink shadow-md">
						<h3 class="text-3xl font-display uppercase tracking-[0.3em] text-brand-red">{event.year}</h3>
						<p class="mt-2 text-sm uppercase tracking-[0.24em] text-ink/70">{event.tagline}</p>
						<p class="mt-3 text-sm text-ink/80">{event.highlight}</p>
						<div class="mt-4 grid gap-3">
							{event.media.slice(0, 2).map((media) => (
								<div class="overflow-hidden rounded-2xl border border-brand-silver/60">
									{typeof media.src === 'string' ? (
										<img src={media.src} alt={media.alt} loading="lazy" class="h-40 w-full object-cover" />
									) : (
										<Image src={media.src} alt={media.alt} loading="lazy" class="h-40 w-full object-cover" />
									)}
								</div>
							))}
						</div>
					</div>
				))}
			</div>
			<div class="pointer-events-none absolute inset-y-0 left-0 w-16 bg-gradient-to-r from-ink to-transparent"></div>
			<div class="pointer-events-none absolute inset-y-0 right-0 w-16 bg-gradient-to-l from-ink to-transparent"></div>
		</div>
		<a href="/past-events" class="inline-flex items-center justify-center rounded-full border border-black/30 px-6 py-3 text-sm font-semibold uppercase tracking-[0.28em] text-black transition hover:border-brand-yellow hover:text-brand-yellow">
			Explore all past events
		</a>
	</div>
</section>
